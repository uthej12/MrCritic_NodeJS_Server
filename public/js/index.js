import{njs,tmdb,img,v3,v3key,backdrop,inTheaters}from"../js/serverDetails.js";var items=[];$(document).ready(()=>{$.getJSON(inTheaters).done(e=>{console.log(e.results),$(".loading_theaters").css({display:"none"}),$(".in_theaters").css({display:"block"}),$.each(e.results,(e,o)=>{e<6&&$(".in_theaters .imgs").append("<div class='col-6 col-md-2 p-2'><div class='zoom '><a href='movieInfo.html?id="+o.id+"'><img class='img-thumbnail' src='"+img+o.poster_path+"'height='400px' width='100%'></a></div></div")})})}),null==localStorage.getItem("token")?($(".authenticated").hide(),$("#loginButton").on("click",()=>{var e=$('[name="uname"]').val(),o=$('[name="password"]').val();console.log(JSON.stringify({username:e,password:o})),""!=e&&""!=o?$.ajax({type:"POST",dataType:"json",contentType:"application/json;charset=utf-8",url:njs+"users/login",data:JSON.stringify({username:e,password:o}),success:e=>{console.log(e),1==e.success&&($("#loginModal").modal("toggle"),$(".auth").hide(),$(".authenticated").show(),localStorage.setItem("token",e.token),location.reload())},error:e=>{alert("Invalid Credentials"),console.log(e)}}):alert("Enter valid data")}),$("#signup").on("click",()=>{var e=$('[name="name"]').val(),o=$('[name="email"]').val(),a=$('[name="runame"]').val(),s=$('[name="rpassword"]').val();$('[name="password2"]').val();console.log(JSON.stringify({name:e,email:o,username:a,password:s})),""!=a&&""!=s?$.ajax({type:"POST",dataType:"json",contentType:"application/json;charset=utf-8",url:njs+"users/signup",data:JSON.stringify({name:e,email:o,username:a,password:s}),success:e=>{console.log(e),1==e.success&&($("#registerModal").modal("toggle"),$("#loginModal").modal("toggle"))},error:e=>{alert("Invalid Credentials"),console.log(e)}}):alert("Enter valid data")})):($.ajax({type:"GET",url:njs+"users",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("token"))},dataType:"json",success:e=>{$(".logo .name").append(e.name),console.log(e)},error:e=>{console.log(e)}}),$(".authenticated").show(),$(".auth").hide(),$("#logout").click(()=>{confirm("Do want to logout?")&&(console.log(localStorage.getItem("token")),localStorage.clear(),$(".auth").show(),$(".authenticated").hide(),location.reload())})),$(".dropdown-menu a.dropdown-toggle").on("click",function(e){return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(e){$(".dropdown-submenu .show").removeClass("show")}),!1});